# 汽車維修測驗系統

專為汽車維修技術人員設計的互動式測驗應用程式，包含完整的汽車維修知識題庫。

## 功能特色

### 🎯 智能測驗系統
- **完整測驗**：測驗所有可用題目，無題數限制，確保完整學習
- **混合題型**：支援選擇題和是非題兩種格式
- **彈性輸入**：是非題可用數字 1(正確)、2(錯誤) 或傳統 O/X 回答
- **即時反饋**：答錯立即顯示正確答案
- **隨時中斷**：按 'q' 隨時離開，自動顯示本輪成績與正確率
- **進度保存**：每題答完即時保存，進度永不丟失

### 📚 完整題庫
- **317題完整題庫**
  - 選擇題：143題
  - 是非題：174題
- **繁體中文**：所有題目採用繁體中文
- **實務導向**：涵蓋汽車維修各個面向的實務知識

### 🔄 多元測驗模式
- **錯題重練**：系統自動記錄所有答錯的題目，可專項練習
- **題型分類**：可選擇只測驗是非題或只測驗選擇題
- **混合模式**：可測驗所有可用題目 (未答過 + 答錯)
- **持續學習**：錯題資料永久保存，直到答對為止
- **即時保存**：每答完一題立即保存進度，隨時中斷都不會丟失進度

### 📌 智能標記系統
- **永久排除**：輸入 `-` 標記題目永不再出現，同時顯示正確答案
- **不知道答案**：輸入 `?` 顯示答案後加入錯題庫
- **靈活重置**：可選擇保留標記或完全重置
- **過濾機制**：標記的題目自動從出題池中排除

### 💡 智能說明系統
- **條件性說明**：只有是非題答案為「X」(錯誤)時才顯示詳細說明
- **避免干擾**：正確答案不顯示說明，避免學習干擾
- **完整覆蓋**：64題錯誤觀念全部配有正確概念澄清
- **自動匹配**：系統自動將題目與說明進行智能配對

## 如何使用

### 1. 編譯程式
```bash
npx tsc
```

### 2. 開始測驗
```bash
node dist/src/quiz.js
```

### 3. 選擇測驗模式
程式啟動後會顯示進度資訊和兩階段選單：

**第一步：選擇題型**
```
=== 測驗進度 ===
可用題數：316
已標記永不出現：20
已答對：110
答錯待重做：5
尚未作答：181

=== 第一步：選擇題型 ===
1. 是非題 (95 題)
2. 選擇題 (91 題) 
3. 混合題型 (186 題)
r. reset 重新開始 (清除答對/答錯記錄，保留標記)
R. reset-all 完全重置 (清除所有記錄包含標記)
q. 離開
請選擇題型：
```

**第二步：選擇範圍**
```
=== 第二步：選擇範圍 ===
1. 只測驗答錯的題目 (5 題)
2. 測驗所有可用題目 (186 題)
b. 返回題型選擇
請選擇測驗範圍：
```

### 4. 答題方式

**選擇題範例：**
```
題目 1: 引擎機油的主要功能是什麼？
1. 清潔引擎
2. 潤滑引擎零件
3. 冷卻引擎
  或輸入：
    - : 標記此題永不再出現
    ? : 不知道答案，顯示答案後加入錯題
    q : 返回主選單（顯示本輪成績）
請輸入答案 (1-3): 2
```

**是非題範例：**
```
題目 2: 柴油引擎，是用火星塞點火的。
  請選擇：
  (1) 正確 (O)
  (2) 錯誤 (X)
  或直接回答 O/o (正確) 或 X/x (錯誤)
  或輸入：
    - : 標記此題永不再出現
    ? : 不知道答案，顯示答案後加入錯題
    q : 返回主選單（顯示本輪成績）
您的答案：2
✔ 答對了！
說明：柴油引擎靠壓縮空氣產生高溫使燃料著火燃燒
```

**離開時顯示成績範例：**
```
您的答案：q

--- 本輪測驗成果 ---
總答題數：15
答對：12
答錯：3
正確率：80%

返回主選單...
```

**標記功能範例：**
```
您的答案：-
📝 此題已標記為永不再出現
正確答案是：2

您的答案：?
❓ 不知道答案...
正確答案是：2
```

### 5. 查看結果
```
---
測驗結束！
總題數：186
答對：150
答錯：36
```

**進度會即時保存，答錯的題目會自動加入錯題庫供下次重做。**

## 系統需求

- Node.js
- TypeScript
- 相關依賴套件 (已在 package.json 中定義)

## 檔案結構

```
├── src/                              # 主程式目錄
│   ├── quiz.ts                       # 主程式 (測驗邏輯)
│   └── tools/                        # 資料處理工具
│       ├── pdf-to-csv.ts             # PDF轉CSV工具
│       ├── pdf-to-csv-multiple-choice.ts # 選擇題PDF處理工具
│       ├── csv-to-json.ts            # CSV轉JSON工具
│       ├── add-explanations.ts       # 新增說明工具
│       ├── verify-explanations.ts    # 驗證說明工具
│       ├── debug-matching.ts         # 偵錯匹配工具
│       └── src_data/                 # 原始CSV資料
│           ├── multiple-choice-questions.csv # 選擇題資料
│           └── true-false-questions.csv      # 是非題資料
├── data/                             # JSON資料檔案
│   ├── questions.json                # 完整題庫
│   ├── questions.example.json        # 題庫格式範例
│   └── quiz-data.json                # 測驗進度記錄 (答對/答錯/標記)
└── dist/                             # 編譯輸出目錄
```

## 開發工具

### 🔄 題庫資料處理流程

如需重新處理題庫資料，請按以下順序執行：

1. **PDF轉CSV** (選擇題)：
   ```bash
   npx tsc && node dist/src/tools/pdf-to-csv-multiple-choice.js
   ```

2. **PDF轉CSV** (是非題)：
   ```bash
   npx tsc && node dist/src/tools/pdf-to-csv.js
   ```

3. **一次性生成完整JSON**（包含說明）：
   ```bash
   npx tsc && node dist/src/tools/csv-to-json.js
   ```

### ✨ 自動化特色

- **智能說明匹配**：自動為64題答案為"X"的是非題添加詳細說明
- **一步到位**：無需額外腳本處理，直接生成包含完整說明的questions.json
- **100%覆蓋率**：所有錯誤觀念題目都有對應的正確概念說明

## 已知問題與注意事項

### ⚠️ PDF解析限制與已知問題
- **爭議題目移除**：是非題034「大型車自動變速箱與小型車相同，嚴禁空檔滑行，否則會損壞變速箱」因內容有爭議已從題庫中移除
- **參考資料**：[ETtoday新聞討論](https://speed.ettoday.net/news/2010943)
- **系統保護**：已設置邏輯確保此題永不出現在測驗中

### 📝 資料驗證
- 如發現題目內容與原始紙本資料不符，請進行人工核對
- 可直接修改對應的CSV檔案後重新生成JSON檔案

---

**開始你的汽車維修知識挑戰吧！** 🚗✨
